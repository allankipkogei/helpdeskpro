{% extends 'base.html' %}

{% block title %}Ticket Details{% endblock %}

{% block content %}
<div class="container mt-4">

    <div class="row justify-content-center">
        <div class="col-lg-8">

            <div class="card shadow-sm">
                <div class="card-body">

                    <!-- Header -->
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 class="fw-bold mb-0">Ticket Details</h3>
                        <span class="badge 
                            {% if ticket.status == 'Open' %}bg-warning
                            {% elif ticket.status == 'In Progress' %}bg-primary
                            {% elif ticket.status == 'Resolved' %}bg-success
                            {% else %}bg-secondary{% endif %}">
                            {{ ticket.status }}
                        </span>
                    </div>

                    <hr>

                    <!-- Ticket Info -->
                    <div class="row mb-3">
                        <div class="col-md-4 fw-semibold text-muted">Title</div>
                        <div class="col-md-8">{{ ticket.title }}</div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-4 fw-semibold text-muted">Description</div>
                        <div class="col-md-8">{{ ticket.description }}</div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-4 fw-semibold text-muted">Category</div>
                        <div class="col-md-8">{{ ticket.category }}</div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-4 fw-semibold text-muted">Priority</div>
                        <div class="col-md-8">
                            <span class="badge 
                                {% if ticket.priority == 'High' %}bg-danger
                                {% elif ticket.priority == 'Medium' %}bg-warning
                                {% else %}bg-success{% endif %}">
                                {{ ticket.priority }}
                            </span>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-4 fw-semibold text-muted">Assigned To</div>
                        <div class="col-md-8">
                            {{ ticket.assigned_to.username|default:"Not assigned" }}
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-4 fw-semibold text-muted">Created At</div>
                        <div class="col-md-8">
                            {{ ticket.created_at|date:"Y-m-d H:i" }}
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-4 fw-semibold text-muted">Last Updated</div>
                        <div class="col-md-8">
                            {{ ticket.updated_at|date:"Y-m-d H:i" }}
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="d-flex justify-content-end">
                        <a href="{% url 'ticket_list' %}" class="btn btn-outline-secondary">
                            Back to My Tickets
                        </a>
                    </div>

                </div>
            </div>

        </div>
    </div>

</div>
{% endblock %}
